--- dwm_origin.c	2025-06-21 22:55:52.913024249 -0400
+++ dwm.c	2025-06-21 23:44:42.604407515 -0400
@@ -2012,10 +2012,20 @@
 void
 updatetitle(Client *c)
 {
-	if (!gettextprop(c->win, netatom[NetWMName], c->name, sizeof c->name))
-		gettextprop(c->win, XA_WM_NAME, c->name, sizeof c->name);
-	if (c->name[0] == '\0') /* hack to mark broken clients */
-		strcpy(c->name, broken);
+    XClassHint ch;
+    if (XGetClassHint(dpy, c->win, &ch)) {
+        if (ch.res_name != NULL) {
+            strncpy(c->name, ch.res_name, sizeof(c->name) - 1);
+            c->name[sizeof(c->name) - 1] = '\0'; /* ensure null termination */
+        } else if (ch.res_class != NULL) {
+            strncpy(c->name, ch.res_class, sizeof(c->name) - 1);
+            c->name[sizeof(c->name) - 1] = '\0';
+        }
+        XFree(ch.res_name);
+        XFree(ch.res_class);
+    } else {
+        strcpy(c->name, broken);
+    }
 }
 
 void
